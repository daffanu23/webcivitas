---
// Import Layout Utama (Ini kuncinya!)
import Layout from '../../layouts/Layout.astro';
import AdminDashboardReact from '../../components/AdminDashboard'; 

// Kita tidak perlu import Navbar/Footer manual lagi karena sudah ada di dalam Layout
---

<Layout title="Admin Dashboard | MEDIACIVITAS">
    
    <div class="admin-view-container">
        <AdminDashboardReact client:only="react" />
    </div>

</Layout>

<script>
    import { supabase } from '../../lib/supabase';

    async function checkSession() {
        const { data: { session } } = await supabase.auth.getSession();
        if (!session) {
            // Jika belum login, kembalikan ke halaman login
            window.location.href = '/login';
        }
    }
    
    checkSession();
</script>

<style>
    /* Container khusus Dashboard */
    .admin-view-container {
        width: 100%;
        max-width: 1440px; /* Lebih lebar dari artikel (biasanya 800px) agar Tabel muat */
        margin: 0 auto;    /* Posisi di tengah */
        padding: 40px 20px; /* Padding Kanan-Kiri 20px, Atas-Bawah 40px */
        min-height: 80vh;  /* Agar footer tidak naik ke tengah saat loading */
    }
</style>